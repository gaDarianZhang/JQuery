<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>index</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
<!--外部容器-->
<div id="wrap">
    <!--头部-->
    <div id="header">
        <!--头部的中间内容区-->
        <div class="headerMain">
            <!--logo-->
            <div class="logo">
                <a href="javascript:;"><img src="./img/logo.png" alt=""></a>
            </div>
            <!--导航区-->
            <nav class="nav">
                <ul class="clearfix">
                    <li>
                        <a href="javascript:;">
                            <div class="up"><img src="./img/home_gruen.png" alt=""></div>
                            <div class="down"><img src="./img/home.png" alt=""></div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Course</div>
                            <div class="down">Course</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Works</div>
                            <div class="down">Works</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">About</div>
                            <div class="down">About</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Team</div>
                            <div class="down">Team</div>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="arrow">
            <img src="./img/arrow.png" alt="">
        </div>
    </div>

    <section id="content">
        <ul class="pagePoint">
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <ul class="contentList">
            <li class="home">
                <div>
                    <ul class="homeList">
                        <li class="active"><article>第一屏</article></li>
                        <li><article>第二屏</article></li>
                        <li><article>第三屏</article></li>
                        <li><article>第四屏</article></li>
                    </ul>  
                    <ul class="homePoint">
                        <li class="active"></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </li>
            <li class="course">
                <div>
                    <div class="plane1"></div>
                    <div class="plane2"></div>
                    <div class="plane3"></div>
                    <h1 class="course1 commonTitle">
                        <span>EINBLICK</span><br><span>ERKENNTNIS</span><br><span>ERGEBNIS</span>
                    </h1>
                    <article class="course2 commonText">
                        Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann. Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                    </article>
                    <div class="course3">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                        <div class="itemWrapper">
                            <div class="item">
                                <div class="back">This is my words</div>
                                <div class="front"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li class="works">
                <div>
                    <div class="pencel1"></div>
                    <div class="pencel2"></div>
                    <div class="pencel3"></div>
                    <div class="works1 commonTitle">
                        <span>EINBLICK</span><br>
                        <span>ERKENNTNIS</span><br>
                        <span>ERGEBNIS</span>
                    </div>
                    <ul class="works2 clearfix">
                        <li class="item">
                            <img src="./img/worksimg1.jpg" alt="">
                            <div class="mask">
                                <span>Honeyfly</span>
                                <div class="icon"></div>
                            </div>
                        </li>
                        <li class="item">
                            <img src="./img/worksimg2.jpg" alt="">
                            <div class="mask">
                                <span>Honeyfly</span>
                                <div class="icon"></div>
                            </div>
                        </li>
                        <li class="item">
                            <img src="./img/worksimg3.jpg" alt="">
                            <div class="mask">
                                <span>Honeyfly</span>
                                <div class="icon"></div>
                            </div>
                        </li>
                        <li class="item">
                            <img src="./img/worksimg4.jpg" alt="">
                            <div class="mask">
                                <span>Honeyfly</span>
                                <div class="icon"></div>
                            </div>
                        </li>
                    </ul>
                    <div class="works3">

                    </div>
                </div>
            </li>
            <li class="about">
                <div>
                    <h1 class="about1 commonTitle">
                        <span>DIE</span><br><span>SPEZIELLE</span><br><span>VIELFALT</span><br>
                    </h1>
                    <article class="about2 commonText">
                        Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.
                    </article>
                    <div class="about3">
                        <div class="item">
                            <img src="./img/about2.jpg" alt=""><!--底片-->
<!--                            js做图片炸裂的布局-->
                            <ul data-src = "./img/about1.jpg"></ul>
<!--                            css做图片炸裂的布局-->
<!--                            <ul>-->
<!--                                <li></li>-->
<!--                                <li></li>-->
<!--                                <li></li>-->
<!--                                <li></li>-->
<!--                            </ul>-->
                        </div>
                        <div class="item">
                            <img src="./img/about4.jpg" alt="">
                            <ul data-src = "./img/about3.jpg"></ul>
<!--                            css做图片炸裂的布局-->
<!--                            <ul>-->
<!--                                <li></li>-->
<!--                                <li></li>-->
<!--                                <li></li>-->
<!--                                <li></li>-->
<!--                            </ul>-->
                        </div>
                    </div>
                </div>
            </li>
            <li class="team">
                <div>
                    <h1 class="team1 commonTitle">
                        <span>WIR SIND</span><br><span>VOXELAIR</span>
                    </h1>
                    <article class="team2 commonText">
                        Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in Heimsheim, zwischen Stuttgart und Karlsruhe. Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen
                    </article>
                    <ul class="team3">
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </li>
        </ul>
    </section>
</div>


<script type="text/javascript">
    window.onload = function () {
        let arrow = document.querySelector("#header .arrow");
        let liNodes = document.querySelectorAll("#header .headerMain .nav ul li");
        let upNodes = document.querySelectorAll("#header .headerMain .nav ul li .up");
        let navIndex = 0;
        let content = document.getElementById("content");
        let header = document.getElementById("header");
        let contentLis = document.querySelectorAll("#content .contentList>li");
        let contentList = document.querySelector("#content .contentList");
        let timer = null;//滚轮翻页降频定时器
        let aboutBomUls = document.querySelectorAll("#content .contentList .about .about3>.item>ul");
        let homePages = document.querySelectorAll("#content .contentList .home .homeList>li");
        let homePoints = document.querySelectorAll("#content .contentList .home .homePoint>li");
        let homePage = document.querySelector("#content .contentList .home .homeList");
        let homePoint = document.querySelector("#content .contentList .home .homePoint");
        let homePageIndex = 0;
        let autoHomeTimer = null;
        let pagePoints = document.querySelectorAll("#content .pagePoint>li");


        //    出入场动画数组
        let animationArr = [
            {
                animationIn:function () {
                    homePage.style.transform = "translateY(0)";
                    homePoint.style.transform = "translate(-50%,0)";
                    homePage.style.opacity = "1";
                    homePoint.style.opacity = "1";
                },
                animationOut:function () {
                    homePage.style.transform = "translateY(-400px)";
                    homePoint.style.transform = "translate(-50%,300px)";
                    homePage.style.opacity = "0";
                    homePoint.style.opacity = "0";
                }
            },
            {
                animationIn:function () {
                    let plane1 = document.querySelector("#content .contentList .course .plane1");
                    let plane2 = document.querySelector("#content .contentList .course .plane2");
                    let plane3 = document.querySelector("#content .contentList .course .plane3");
                    plane1.style.transform = 'translate(0px,0px)';
                    plane2.style.transform = 'translate(0px,0px)';
                    plane3.style.transform = 'translate(0px,0px)';
                    plane1.style.opacity = '1';
                    plane2.style.opacity = '1';
                    plane3.style.opacity = '1';

                },
                animationOut:function () {
                    let plane1 = document.querySelector("#content .contentList .course .plane1");
                    let plane2 = document.querySelector("#content .contentList .course .plane2");
                    let plane3 = document.querySelector("#content .contentList .course .plane3");
                    plane1.style.transform = 'translate(-200px,-200px)';
                    plane2.style.transform = 'translate(-200px,200px)';
                    plane3.style.transform = 'translate(200px,-200px)';
                    plane1.style.opacity = '.5';
                    plane2.style.opacity = '.5';
                    plane3.style.opacity = '.5';
                }
            },
            {
                animationIn:function () {
                    let pencile1 = document.querySelector("#content .contentList .works .pencel1");
                    let pencile2 = document.querySelector("#content .contentList .works .pencel2");
                    let pencile3 = document.querySelector("#content .contentList .works .pencel3");
                    pencile1.style.transform = 'translateY(0px)';
                    pencile2.style.transform = 'translateY(0px)';
                    pencile3.style.transform = 'translateY(0px)';
                },
                animationOut:function () {
                    let pencile1 = document.querySelector("#content .contentList .works .pencel1");
                    let pencile2 = document.querySelector("#content .contentList .works .pencel2");
                    let pencile3 = document.querySelector("#content .contentList .works .pencel3");
                    pencile1.style.transform = 'translateY(-300px)';
                    pencile2.style.transform = 'translateY(300px)';
                    pencile3.style.transform = 'translateY(200px)';
                }
            },
            {
                animationIn:function () {
                    let pics = document.querySelectorAll("#content .contentList .about .about3>.item");
                    pics[0].style.transform = "rotate(0)";
                    pics[1].style.transform = "rotate(0)";

                },
                animationOut:function () {
                    let pics = document.querySelectorAll("#content .contentList .about .about3>.item");
                    pics[0].style.transform = "rotate(45deg)";
                    pics[1].style.transform = "rotate(-45deg)";
                }
            },
            {
                animationIn:function () {
                    let team1 = document.querySelector("#content .contentList .team .team1");
                    let team2 = document.querySelector("#content .contentList .team .team2");
                    team1.style.transform = "translateX(0)";
                    team2.style.transform = "translateX(0)";
                },
                animationOut:function () {
                    let team1 = document.querySelector("#content .contentList .team .team1");
                    let team2 = document.querySelector("#content .contentList .team .team2");
                    team1.style.transform = "translateX(-400px)";
                    team2.style.transform = "translateX(400px)";
                }
            }
        ];

        setHeader();
        setContent();
        //添加滚轮切屏事件
        document.addEventListener("mousewheel",mouseScroll,{passive:false});
        document.addEventListener("DOMMouseScroll",mouseScroll,{passive:false});
        allPicBom();
        autoHomePagePlay();
        clickHomePlayPoint();//当点击home首页轮播图按钮时的动作
        window.onresize = function(){
            //设置箭头的位置
            arrow.style.left = liNodes[navIndex].getBoundingClientRect().left + liNodes[navIndex].offsetWidth/2 - arrow.offsetWidth/2 +"px";

            //设置content的高
            content.style.height = document.documentElement.clientHeight - header.offsetHeight + "px";
            //设置所有Li的高
            for (let i = 0; i < contentLis.length; i++) {
                contentLis[i].style.height = content.style.height;
            }
            switchBigPage(navIndex);
        };

        function setHeader(){
            //初始化，箭头在home位置
            arrow.style.left = liNodes[0].getBoundingClientRect().left + liNodes[0].offsetWidth/2 - arrow.offsetWidth/2 +"px";
            upNodes[0].style.width = "100%";

            //点击header的导航栏中的选项时
            for (let i = 0; i < liNodes.length; i++) {//let 有for作用域
                liNodes[i].onclick = function () {
                    switchBigPage(i)
                };
            }
            //点击页面右侧固定的切换页面的按钮时
            for (let i = 0; i < pagePoints.length; i++) {
                pagePoints[i].onclick = function () {
                    switchBigPage(i);
                }
            }
        }
        //设置content区域的宽高
        function setContent(){
            //设置content的高
            content.style.height = document.documentElement.clientHeight - header.offsetHeight + "px";
            //设置所有Li的高
            for (let i = 0; i < contentLis.length; i++) {
                contentLis[i].style.height = content.style.height;
            }
        //    初始化出入场动画，都应该设置为出场
            for (let j = 1; j < animationArr.length; j++) {
                animationArr[j].animationOut();
            }
            animationArr[0].animationIn();
        }

        /**
         *
         * @param number:移动到哪一个，并跟新现在页面Index
         */
        function moveArrow(number) {
            upNodes[navIndex].style.width = "";
            upNodes[number].style.width = "100%";
            arrow.style.left = liNodes[number].getBoundingClientRect().left + liNodes[number].offsetWidth/2 - arrow.offsetWidth/2 +"px";
            pagePoints[navIndex].className = "";
            pagePoints[number].className = "active";
            animationArr[navIndex].animationOut();
            animationArr[number].animationIn();
            navIndex = number;
        }

        /**
         *
         * @param number切换到指定页面，不更新页面Index
         */
        function movePage(number) {
            contentList.style.top = -number*(document.documentElement.clientHeight - header.offsetHeight) + "px";
        }
        function switchBigPage(i) {
            moveArrow(i);//更新了页面index到i
            movePage(i);//不会再更新index
            //因为前边已经更新了页面索引，那么现在不知道要把哪个页面的.active类名去掉，那就只能遍历了
            //还是把这一段给写到moveArrow函数内把
            // for (let j = 0; j < pagePoints.length; j++) {
            //     pagePoints[j].className = "";
            // }
            // pagePoints[i].className = "active";


            //切换页面时的出入场动画
            //因为前边已经更新了页面索引，那么现在不知道要把哪个页面设置为出场动画，就只能遍历
            // for (let j = 0; j < animationArr.length; j++) {
            //     animationArr[j].animationOut();
            // }
            // animationArr[i].animationIn();


        }
        /**
         * 
         * @param event
         */
        function mouseScroll(event) {
            //给滚轮翻页降频，否则的话，一不小心滚轮动了两下就刷刷滚了两页
            console.log(timer);
            clearTimeout(timer);
            timer = setTimeout(function () {
                event = event || window.event;
                let flag;
                let result = event.wheelDelta || event.detail;
                if (result==120 || result == -3){
                    //滚轮向下推，显示上面的内容
                    flag = true;
                }
                else if (result == -120 || result == 3){
                    flag = false;
                }
                if (flag){
                    if (navIndex == 0){
                        return ;
                    }
                    moveArrow(navIndex-1);//在这里navIndex已经更新了值了
                    movePage(navIndex);//这里不会更新Index值
                    //加到了moveArrow里边，因为这moveArrow里边有上一次的navindex和更新后的
                    // pagePoints[navIndex+1].className = "";
                    // pagePoints[navIndex].className = "active";
                }
                else {
                    if (navIndex == contentLis.length-1){
                        return ;
                    }
                    moveArrow(navIndex+1);
                    movePage(navIndex);
                    // pagePoints[navIndex-1].className = "";
                    // pagePoints[navIndex].className = "active";
                }
                event.preventDefault && event.preventDefault();
                return false;
            },200);

        }

        /**
         * 图片炸裂
         */
        function allPicBom() {
            for (let i = 0; i < aboutBomUls.length; i++) {
                picBom(aboutBomUls[i]);
            }
            function picBom(ulNode) {
                let imgSrc = ulNode.dataset.src;
                let imgW = ulNode.offsetWidth/2;
                let imgH = ulNode.offsetHeight/2;
                for (let j = 0; j < 4; j++) {
                    let liNode = document.createElement("li");
                    let imgNode = new Image();
                    imgNode.src = imgSrc;
                    liNode.style.width = imgW + "px";
                    liNode.style.height = imgH + "px";
                    imgNode.style.top = -Math.floor(j/2)*imgH + "px";
                    imgNode.style.left = -(j%2)*imgW + "px";
                    liNode.appendChild(imgNode);
                    ulNode.appendChild(liNode);
                }
                let imgNodes = ulNode.querySelectorAll("li>img");
                ulNode.onmouseenter = function () {
                    imgNodes[0].style.top = imgH + "px";
                    imgNodes[1].style.left = -2*imgW + "px";
                    imgNodes[2].style.left = imgW + 'px';
                    imgNodes[3].style.top = -2*imgH + 'px';
                };
                ulNode.onmouseleave = function () {
                    imgNodes[0].style.top = 0 + 'px';
                    imgNodes[1].style.left = -imgW + 'px';
                    imgNodes[2].style.left = 0 + 'px';
                    imgNodes[3].style.top = -imgH + 'px';
                }
            }
        }
        //Home首页的3d轮播
        function moveHomePage(nextPage) {//number
            //没有给函数传入参数，那么默认向右边一屏翻滚
            if (nextPage == undefined){
                // clickNextPoint();
                homePages[homePageIndex].className = "leftHide";
                homePages[(homePageIndex+1 >= homePages.length)?0:homePageIndex+1].className = "rightShow";
                homePoints[homePageIndex].className = "";
                homePageIndex = (homePageIndex+1 >= homePages.length)?0:homePageIndex+1;
                homePoints[homePageIndex].className = "active";
            }
            else if (typeof nextPage == "number" && nextPage<=homePages.length-1){
                if (nextPage>homePageIndex){
                    homePages[homePageIndex].className = "leftHide";
                    homePages[nextPage].className = "rightShow";
                    homePoints[homePageIndex].className = "";
                    homePageIndex = nextPage;
                    homePoints[homePageIndex].className = "active";
                }
                else if (nextPage<homePageIndex){
                    homePages[homePageIndex].className = "rightHide";
                    homePages[nextPage].className = "leftShow";
                    homePoints[homePageIndex].className = "";
                    homePageIndex = nextPage;
                    homePoints[homePageIndex].className = "active";
                }
            }
        }
        //home首页的自动3d轮播
        function autoHomePagePlay() {
            autoHomeTimer = setInterval(function () {
                moveHomePage();
            },2500);
        }
        //home首页轮播按钮点击逻辑
        function clickHomePlayPoint() {
            for (var i = 0; i < homePoints.length; i++) {
                homePoints[i].index = i;
                homePoints[i].onclick = function () {
                    clearInterval(autoHomeTimer);
                    moveHomePage(this.index);
                    autoHomePagePlay();
                }
            }
        }




    }

</script>
</body>
</html>